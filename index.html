<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="utf-8"/>
<title>Chatbox Directrices</title>
<style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background-image: url('https://ecopetrol.sharepoint.com/sites/DirectricesExogena/Documentos%20compartidos/fondo_ecopetrol.jpg'); /* Mantiene tu fondo corporativo */
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            color: #000;
        }
        h1 {
            color: #004884;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 10px;
        }
        select, button {
            padding: 10px;
            margin: 10px 0;
            width: 100%;
            font-size: 16px;
        }
        #respuesta {
            margin-top: 20px;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.9);
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
<h1>Chatbox Directrices Ecopetrol</h1>
<label for="tema">¿Sobre qué tema quieres preguntar?</label>
<select id="tema">
<option value="">-- Selecciona un tema --</option>
</select>
<label for="pregunta">Selecciona la pregunta</label>
<select id="pregunta">
<option value="">-- Selecciona una pregunta --</option>
</select>
<button onclick="elevarConsulta()">No encontré mi pregunta, elevar consulta</button>
<div id="respuesta"></div>
<script>
        let datos = {};

        fetch('directrices.json')
            .then(response => response.json())
            .then(data => {
                datos = data;
                const temaSelect = document.getElementById('tema');
                for (let tema in datos) {
                    let option = document.createElement('option');
                    option.value = tema;
                    option.textContent = tema;
                    temaSelect.appendChild(option);
                }
            });

        document.getElementById('tema').addEventListener('change', function() {
            const preguntas = datos[this.value] || [];
            const preguntaSelect = document.getElementById('pregunta');
            preguntaSelect.innerHTML = '<option value="">-- Selecciona una pregunta --</option>';
            preguntas.forEach(p => {
                let option = document.createElement('option');
                option.value = p;
                option.textContent = p;
                preguntaSelect.appendChild(option);
            });
            document.getElementById('respuesta').innerHTML = '';
        });

        document.getElementById('pregunta').addEventListener('change', function() {
            const respuestaDiv = document.getElementById('respuesta');
            respuestaDiv.innerHTML = '<strong>Respuesta:</strong> Esta funcionalidad está en desarrollo. Pronto verás la respuesta aquí.';
        });

        function elevarConsulta() {
            alert('Tu consulta será elevada al equipo correspondiente.');
        }
    </script>

<div style="margin-top: 20px;">
<button onclick="window.location.href='mailto:walter.castro@ecopetrol.com.co,adalbert.palacios@ecopetrol.com.co?cc=sandra.bulla@ecopetrol.com.co,diana.espinosa@ecopetrol.com.co,jennyca.rodriguez@ecopetrol.com.co&amp;subject=Consulta%20sobre%20Directrices%20Ex%C3%B3genas&amp;body=Por%20favor%20describa%20su%20consulta%20aquí.'">
        No encontré mi pregunta, elevar consulta
    </button>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const temaSelect = document.getElementById("tema");
    const preguntaSelect = document.getElementById("pregunta");
    const respuestaDiv = document.getElementById("respuesta");

    fetch("directrices.json")
        .then(response => response.text())
        .then(text => {
            const lines = text.split("\n").filter(line => line.trim() !== "");
            const data = lines.map(line => {
                const [tema, pregunta, ...resto] = line.split("?");
                return {
                    tema: tema.trim(),
                    pregunta: pregunta.trim(),
                    respuesta: resto.join("?").trim()
                };
            });

            const temasUnicos = [...new Set(data.map(d => d.tema))];
            temasUnicos.forEach(tema => {
                const option = document.createElement("option");
                option.value = tema;
                option.textContent = tema;
                temaSelect.appendChild(option);
            });

            temaSelect.addEventListener("change", function () {
                preguntaSelect.innerHTML = '<option value="">-- Selecciona una pregunta --</option>';
                const preguntasFiltradas = data.filter(d => d.tema === temaSelect.value);
                preguntasFiltradas.forEach(d => {
                    const option = document.createElement("option");
                    option.value = d.pregunta;
                    option.textContent = d.pregunta;
                    preguntaSelect.appendChild(option);
                });
                respuestaDiv.textContent = "";
            });

            preguntaSelect.addEventListener("change", function () {
                const seleccion = data.find(d => d.tema === temaSelect.value && d.pregunta === preguntaSelect.value);
                respuestaDiv.textContent = seleccion ? seleccion.respuesta : "No se encontró respuesta.";
            });
        })
        .catch(error => {
            console.error("Error al cargar el archivo JSON:", error);
            respuestaDiv.textContent = "No se pudo cargar la información.";
        });
});
</script>
</body>
</html>
